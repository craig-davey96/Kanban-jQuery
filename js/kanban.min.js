(function(a){a.fn.kanban=function(d){var i=a(this);var g=a.extend({titles:["Block 1","Block 2","Block 3","Block 4"],colours:[],items:[],onChange:function(k,j){},onReceive:function(k,j){}},d);var e={kanban_board_class:"cd_kanban_board",kanban_board_titles_class:"cd_kanban_board_titles",kanban_board_title_class:"cd_kanban_board_title",kanban_board_blocks_class:"cd_kanban_board_blocks",kanban_board_block_class:"cd_kanban_board_block",kanban_board_item_class:"cd_kanban_board_block_item",kanban_board_item_placeholder_class:"cd_kanban_board_block_item_placeholder",kanban_board_item_title_class:"cd_kanban_board_block_item_title",kanban_board_item_footer_class:"cd_kanban_board_block_item_footer"};function f(){i.addClass(e.kanban_board_class);i.append('<div class="'+e.kanban_board_titles_class+'"></div>');i.append('<div class="'+e.kanban_board_blocks_class+'"></div>');c();b();h()}function c(){g.titles.forEach(function(k,j,l){var k='<div style="background: '+g.colours[j]+'" class="'+e.kanban_board_title_class+'"><p>'+k+"</p></div>";i.find("."+e.kanban_board_titles_class).append(k)})}function b(){g.titles.forEach(function(k,j,l){var k='<div class="'+e.kanban_board_block_class+'" data-block="'+k+'"></div>';i.find("."+e.kanban_board_blocks_class).append(k)});a("."+e.kanban_board_block_class).sortable({connectWith:"."+e.kanban_board_block_class,containment:"."+e.kanban_board_blocks_class,placeholder:e.kanban_board_item_placeholder_class,scroll:true,cursor:"move",change:g.onChange,receive:g.onReceive}).disableSelection()}function h(){g.items.forEach(function(l,k,n){var m=i.find("."+e.kanban_board_block_class+'[data-block="'+l.block+'"]');var j='<div class="'+e.kanban_board_item_class+'" data-id="'+l.id+'">';j+='<div class="'+e.kanban_board_item_title_class+'">'+l.title+"</div>";if(l.link){j+='<a href="'+l.link+'">'+l.link_text+"</a>"}if(l.footer){j+='<div class="'+e.kanban_board_item_footer_class+'">'+l.footer+"</div>"}j+="</div>";m.append(j)})}f()}}(jQuery));